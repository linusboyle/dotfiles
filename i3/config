# config file for i3 
# by linusboyle,based on many other dotfiles ;)
# 狷墨居主人

# >>>>定义变量<<<<

set $mod Mod4
set $super bindsym Mod4
set $exe exec --no-startup-id

set $WS1  1:
set $WS2  2:
set $WS3  3:
set $WS4  4:
set $WS5  5:
set $WS6  6:
set $WS7  7:
set $WS8  8:
set $WS9  9:
set $WS0 10:

set $terminal konsole
set $filemanager polo-gtk
set $browser firefox

# i3-gap only
gaps inner 5
gaps outer 5
smart_gaps on

# >>>字体<<<
font pango:Source Code Pro SemiBold 10

# >>>窗口<<<

# 按下mod用鼠标点击任意位置修改浮动窗口
floating_modifier $mod

# 为应用指定工作区
# 暂时无用
#assign [class="Google-chrome"] $WS2
#assign [class="Deepin-terminal"] $WS1
#assign [class="URxvt"] $WS1
#assign [class="Typora"] $WS3
#assign [class="dde-file-manager"] $WS4
#assign [class="Nautilus"] $WS4
assign [class="pr"] $WS4
assign [class="tm"] $WS4

for_window [class="ksysguard"] floating enable
for_window [class="Wine"] floating enable
for_window [class="Gitk"] floating enable
for_window [class="Git-gui"] floating enable
for_window [class="Electron"] floating enable
for_window [class="Gitg"] floating enable

# 自定义应用启动按键
# 终端
$super+Return $exe $terminal
#$super+t      $exe typora
$super+e      $exe $filemanager
$super+c      $exe $browser

#polybar
$super+b $exe togglebar

# 关闭窗口
$super+q kill
#bindsym mod1+F4 kill

# 启动器
$super+r $exe rofi_run 
$super+w $exe rofi_term 
bindsym mod1+Tab $exe rofi_win

# 移动焦点
$super+h focus left
$super+j focus down
$super+k focus up
$super+l focus right

#$super+Left focus left
#$super+Down focus down
#$super+Up focus up
#$super+Right focus right

# 禁止焦点随鼠标移动
focus_follows_mouse no

# 移动窗口
$super+Shift+h move left
$super+Shift+j move down
$super+Shift+k move up
$super+Shift+l move right

#$super+Shift+Left move left
#$super+Shift+Down move down
#$super+Shift+Up move up
#$super+Shift+Right move right

# 开启前往当前工作区自动返回上一工作区
workspace_auto_back_and_forth yes

# 改变分割方向
$super+v split toggle

# 全屏
$super+f fullscreen toggle

# 切换窗口模式 
$super+x layout toggle all

# 切换浮动/平铺
$super+Shift+space floating toggle

# 切换浮动/平铺焦点
$super+space focus mode_toggle

# 隐藏窗口 
$super+Shift+minus move scratchpad

# 恢复窗口
$super+minus scratchpad show

# 聚焦上一级容器
$super+p focus parent

# >>>工作区<<<
# 切换
$super+1 workspace $WS1
$super+2 workspace $WS2
$super+3 workspace $WS3
$super+4 workspace $WS4
$super+5 workspace $WS5
$super+6 workspace $WS6
$super+7 workspace $WS7
$super+8 workspace $WS8
$super+9 workspace $WS9
$super+0 workspace $WS0

$super+Tab workspace next

# 移动至工作区
$super+Shift+1 move container to workspace $WS1
$super+Shift+2 move container to workspace $WS2
$super+Shift+3 move container to workspace $WS3
$super+Shift+4 move container to workspace $WS4
$super+Shift+5 move container to workspace $WS5
$super+Shift+6 move container to workspace $WS6
$super+Shift+7 move container to workspace $WS7
$super+Shift+8 move container to workspace $WS8
$super+Shift+9 move container to workspace $WS9
$super+Shift+0 move container to workspace $WS0

# >>>i3<<<

# 重新加载配置文件
$super+Shift+c reload

# 重新启动i3
$super+Shift+r restart

# 退出
# $super+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# 状态栏
#bar {
        ##i3bar_command deepin-topbar
        #status_command /usr/bin/bumblebee-status -m time mpd amixer battery cpu memory -p amixer.left-click="mute" cpu.left-click="ksysguard" memory.left-click="ksysguard" memory.format="{used}" -t solarized-powerline
           ##status_command $HOME/src/bumblebee-status/bumblebee-status -m nic disk:root cpu memory battery date time pasink pasource -p root.path=/ time.format="%H:%M CW %V" date.format="%a, %b %d %Y" -t solarized-powerline

        #position top
        #font pango:Source Code Pro SemiBold 10
        
        ##bindsym button1 nop
        ##bindsym button3 $exe deepin-system-monitor

        #tray_padding 2
        ##tray_output none

        ##separator_symbol ""

        #colors {
        #background #101010
        #statusline #FFFFFF
        #separator  #3399FF
        ## 工作区颜色         边框    背景    文字
        ##focused_workspace  #3297FD #11111100 #FFFFFF
        ##active_workspace   #FFFFFF #FFFFFF00 #FFFFFF
        ##inactive_workspace #111111 #11111100 #FFFFFF
        ##urgent_workspace   #990000 #11111100 #FFFFFF
        ##binding_mode       #990000 #99000000 #FFFFFF
        #}
#}

# 颜色
client.focused              #21618C #21618C #FFFFFF
client.focused_inactive 	#101010 #000000 #FFFFFF
client.unfocused           	#101010 #000000 #FFFFFF
client.urgent               #CD5C5C #CD5C5C #FFFFFF

# 边界
#new_window pixel 0
#new_float none
#hide_edge_borders both
for_window [class="^.*"] border pixel 0

# 自动聚焦设置
#no_focus [class="deepin-notifications"]

# >>>模式<<<

# 调整大小
mode "resize" {
        bindsym h resize shrink width 5 px or 5 ppt
        bindsym j resize grow height 5 px or 5 ppt
        bindsym k resize shrink height 5 px or 5 ppt
        bindsym l resize grow width 5 px or 5 ppt

        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym mod1+r mode "resize"

#调整透明度 废弃
set $transparent (a) 100% (b) 75% (c) 50% (d) 25% (e) 0%

mode "$transparent" {
    bindsym a $exe transset 1 -a, mode "default"
    bindsym b $exe transset .75 -a, mode "default"
    bindsym c $exe transset .5 -a, mode "default"
    bindsym d $exe transset .25 -a, mode "default"
    bindsym e $exe transset 0 -a, mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

$super+a mode $transparent


set $Locker i3lock --color "#000000" && sleep 1
#系统切换模式
set $mode_system System (l) lock, (e) logout, (s) suspend, (r) reboot, (p) poweroff
mode "$mode_system" {
	bindsym l $exe lock, mode "default"
	bindsym e $exe i3-msg exit, mode "default"
	bindsym s $exe $Locker && systemctl suspend, mode "default"
	bindsym r $exe systemctl reboot, mode "default"
	bindsym p $exe systemctl poweroff -i, mode "default"

	#back to normal: Enter or Escape
	bindsym Return mode "default"
	bindsym Escape mode "default"
}
$super+Delete mode "$mode_system"

#mpd 控制模式
set $mpc MPD Control (s) Stop (t) Toggle (n) Next (r) Previous

mode "$mpc" {
    bindsym s $exe mpc stop, mode "default"
    bindsym t $exe mpc toggle, mode "default"
    bindsym n $exe mpc next, mode "default"
    bindsym r $exe mpc previous, mode "default"

	bindsym Return mode "default"
	bindsym Escape mode "default"
}
$super+o mode "$mpc"
# >>>按键<<<

#设置笔记本音量控制按键的行为
#按键不怎么灵，考虑替代方案
bindsym XF86AudioRaiseVolume $exe volraise
bindsym XF86AudioLowerVolume $exe voldown
bindsym XF86AudioMute $exe mute 

# >>>自动启动<<<

#背景图片
$exe feh --bg-fill "/home/linusboyle/pix/bg2.jpg"
#$exe get-wallpaper

#合成器
$exe compton -b

#通知服务
#exec --no-startup-id killall deepin-notifications
$exe twmnd

#禁用主板鸣笛
$exe xset b off

#mpd server
$exe mpd

#load the xresources
exec_always --no-startup-id xrdb ~/.Xresources

#polybar
exec_always --no-startup-id launchbar
