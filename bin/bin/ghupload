#!/usr/bin/env bash
#Author: Zhilei Han <hzl17@mails.tsinghua.edu.cn> 

if [ $# -eq 0 ] 
then
    kdialog --msgbox "Please pass file"
    exit 1
fi

for file in "$@"
do
    ghupload.py "$file" | xclip -selection clipboard

    if [ $? -ne 0 ] ;then
        notify-send "GH Upload" "Upload Failed" -u critical -a "GH Uploader"
        exit 1
    fi
done

notify-send "GH Upload" "Upload Successful" -a "GH Uploader"
